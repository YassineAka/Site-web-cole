/* ============================================
 * DDL de création de la BD + valeurs de départ
 * ============================================
 */
 
/* Suppression des tables si BD existe deja */

DROP TABLE IF EXISTS course_groups_teachers;

DROP TABLE IF EXISTS course_groups;

DROP TABLE IF EXISTS course;

DROP TABLE IF EXISTS teacher;

DROP TABLE IF EXISTS mission;

DROP TABLE IF EXISTS category;

DROP TABLE IF EXISTS groupe;




/* Creation des tables */



CREATE TABLE teacher (
     id      VARCHAR(3) NOT NULL,
     name    VARCHAR(20) NOT NULL,
	firstName    VARCHAR(20) NOT NULL,
     CONSTRAINT teacherPK PRIMARY KEY (id)
);

CREATE TABLE course (
     id      VARCHAR(7) NOT NULL,
     title   VARCHAR(50) NOT NULL,
     nbHours NUMERIC(3) NOT NULL,
     CONSTRAINT CoursePK PRIMARY KEY (id)
);

CREATE TABLE category (
     id      VARCHAR(50) NOT NULL,
     CONSTRAINT categoryPK PRIMARY KEY (id)
);

CREATE TABLE mission (
     id      INT NOT NULL AUTO_INCREMENT,
     title   VARCHAR(50) NOT NULL,
     nbHours NUMERIC(2) NOT NULL,
     cat     VARCHAR(50) NOT NULL,
     CONSTRAINT missionPK PRIMARY KEY (id),
     CONSTRAINT FK_CATEGORY FOREIGN KEY (cat) REFERENCES category(id) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE groupe (
     id      VARCHAR(15) NOT NULL,
     CONSTRAINT groupePK PRIMARY KEY (id) 
);

CREATE TABLE course_groups (
     course      VARCHAR(7) NOT NULL,
     groupe      VARCHAR(15) NOT NULL,
     CONSTRAINT PK_COURSE_GROUP PRIMARY KEY (course,groupe),
     CONSTRAINT FK_GROUPS FOREIGN KEY (groupe) REFERENCES groupe(id) ON DELETE CASCADE ON UPDATE CASCADE,
     CONSTRAINT FK_COURSE FOREIGN KEY (course) REFERENCES course(id) ON DELETE CASCADE ON UPDATE CASCADE
);
;

CREATE TABLE course_groups_teachers (
     course      VARCHAR(7) NOT NULL,
     groupe      VARCHAR(15) NOT NULL,
     teacher      VARCHAR(3) NOT NULL,
     CONSTRAINT PK_COURSE_GROUP_TEACHER PRIMARY KEY (course,groupe,teacher),
     CONSTRAINT FK_GROUP FOREIGN KEY (groupe) REFERENCES groupe(id) ON DELETE CASCADE ON UPDATE CASCADE,
     CONSTRAINT FK_COURSES FOREIGN KEY (course) REFERENCES course(id) ON DELETE CASCADE ON UPDATE CASCADE,
     CONSTRAINT FK_TEACHER FOREIGN KEY (teacher) REFERENCES teacher(id) ON DELETE CASCADE ON UPDATE CASCADE
);

/* Remplissage des tables */

INSERT INTO teacher VALUES ('ABS','Absil','Romain');
INSERT INTO teacher VALUES ('MAP','Applaincourt','Michel');
INSERT INTO teacher VALUES ('MBA','Bastreghi','Monica');
INSERT INTO teacher VALUES ('BEJ','Beleho','Jonas');
INSERT INTO teacher VALUES ('PBT','Bettens','Pierre');
INSERT INTO teacher VALUES ('BIS','Bischop','Patrick');
INSERT INTO teacher VALUES ('DBO','Boigelot','Denis');
INSERT INTO teacher VALUES ('MCD','Codutti','Marco');
INSERT INTO teacher VALUES ('CUV','Cuvelier','Geneviève');
INSERT INTO teacher VALUES ('NDM','De Montigny','Nathalie');
INSERT INTO teacher VALUES ('JDS','Dossogne','Jérôme');
INSERT INTO teacher VALUES ('SDR','Drobisz','Sébastien');
INSERT INTO teacher VALUES ('BFE','Fetai','Besa');
INSERT INTO teacher VALUES ('EGR','Georges','Eric');
INSERT INTO teacher VALUES ('MHI','Hadjili','Mohamed');
INSERT INTO teacher VALUES ('HAL','Hallal','Amine');
INSERT INTO teacher VALUES ('JLC','Lechien','Jonathan');
INSERT INTO teacher VALUES ('CLG','Leignel','Christine');
INSERT INTO teacher VALUES ('LMA','Martinez','Sanchez Luis');
INSERT INTO teacher VALUES ('RMA','Mathieu','Rudy');
INSERT INTO teacher VALUES ('JMM','Mattens','Jean-Michel');
INSERT INTO teacher VALUES ('PMA','Matsos','Pantelis');
INSERT INTO teacher VALUES ('DNA','Nabet','David');
INSERT INTO teacher VALUES ('APA','Paquot','Arthur');
INSERT INTO teacher VALUES ('XPA','Paulus','Xavier');
INSERT INTO teacher VALUES ('NPX','Pettiaux','Nicolas');
INSERT INTO teacher VALUES ('SRE','Rexhep','Selim');
INSERT INTO teacher VALUES ('NRI','Richard','Nicolas');
INSERT INTO teacher VALUES ('ARO','Rousseau','Anne');
INSERT INTO teacher VALUES ('SRV','Servais','Frédéric');
INSERT INTO teacher VALUES ('TSE','Severs','Thierry');
INSERT INTO teacher VALUES ('JSS','Stoffen','Jean-Sébastien');
INSERT INTO teacher VALUES ('GVA','Van Assche','Gilles');
INSERT INTO teacher VALUES ('NVS','Vansteenkiste','Nicolas');
INSERT INTO teacher VALUES ('MWA','Wahid','Moussa');


INSERT INTO course VALUES ('WEBG5','Développement web III',50);
INSERT INTO course VALUES ('WEBG4','Développement web II',25);
INSERT INTO course VALUES ('SYSG5','Système exploitation III',40);
INSERT INTO course VALUES ('PRJG5','Gestion de projet',65);


INSERT INTO category  (`id`) VALUES ('Stage');
INSERT INTO category  (`id`) VALUES ('Aide reussite');
INSERT INTO category  (`id`) VALUES ('Administration Git');
INSERT INTO category  (`id`) VALUES ('Inscription');
INSERT INTO category  (`id`) VALUES ('Remediation');


INSERT INTO `mission` (title,nbHours,cat) VALUES ('Trouver un stage Erasmus',10 ,'Stage');
INSERT INTO `mission` (title,nbHours,cat) VALUES ('Trouver un stage Belgique',10 ,'Stage');
INSERT INTO `mission` (title,nbHours,cat) VALUES  ('Organiser une seance de remediation ',10 ,'Aide reussite');
INSERT INTO `mission` (title,nbHours,cat) VALUES  ('Gestion de compte',10 ,'Administration Git');
INSERT INTO `mission` (title,nbHours,cat) VALUES  ('Gestion de stokage',10 ,'Administration Git');
INSERT INTO `mission` (title,nbHours,cat) VALUES  ('Gestion de inscription',10 ,'Inscription');
INSERT INTO `mission` (title,nbHours,cat) VALUES  ('Gestion des paiements',10 ,'Inscription');


INSERT INTO groupe VALUES ('A111');
INSERT INTO groupe VALUES ('A112');
INSERT INTO groupe VALUES ('A211');
INSERT INTO groupe VALUES ('A212');
INSERT INTO groupe VALUES ('B111');
INSERT INTO groupe VALUES ('B112');
INSERT INTO groupe VALUES ('B211');
INSERT INTO groupe VALUES ('B212');
INSERT INTO groupe VALUES ('C111');
INSERT INTO groupe VALUES ('C112');
INSERT INTO groupe VALUES ('C211');
INSERT INTO groupe VALUES ('C212');
INSERT INTO groupe VALUES ('D111');
INSERT INTO groupe VALUES ('D112');
INSERT INTO groupe VALUES ('D211');
INSERT INTO groupe VALUES ('D212');
INSERT INTO groupe VALUES ('E111');
INSERT INTO groupe VALUES ('E112');
INSERT INTO groupe VALUES ('E211');
INSERT INTO groupe VALUES ('E212');
INSERT INTO groupe VALUES ('F111');
INSERT INTO groupe VALUES ('F112');
INSERT INTO groupe VALUES ('F211');
INSERT INTO groupe VALUES ('F212');


INSERT INTO course_groups VALUES ('WEBG4','A111');
INSERT INTO course_groups VALUES ('WEBG4','A112');
INSERT INTO course_groups VALUES ('WEBG4','A211');
INSERT INTO course_groups VALUES ('WEBG5','B111');
INSERT INTO course_groups VALUES ('WEBG5','B112');
INSERT INTO course_groups VALUES ('SYSG5','D211');
INSERT INTO course_groups VALUES ('SYSG5','E212');
INSERT INTO course_groups VALUES ('SYSG5','B112');
INSERT INTO course_groups VALUES ('SYSG5','F211');


INSERT INTO course_groups_teachers VALUES ('WEBG4','A111','APA');
INSERT INTO course_groups_teachers VALUES ('WEBG4','A112','APA');
INSERT INTO course_groups_teachers VALUES ('WEBG4','A211','ABS');
INSERT INTO course_groups_teachers VALUES ('WEBG5','B111','SRV');
INSERT INTO course_groups_teachers VALUES ('WEBG5','B112','ABS');
INSERT INTO course_groups_teachers VALUES ('SYSG5','D211','NVS');
INSERT INTO course_groups_teachers VALUES ('SYSG5','E212','ABS');
